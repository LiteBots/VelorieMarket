<!DOCTYPE html>
<html lang="pl">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
Â  <title>Platforma â€“ Velorie Market</title>
Â  <meta name="theme-color" content="#0a1030" />
Â  <link rel="icon" type="image/png" href="favicon.png" />
Â  <script src="https://cdn.tailwindcss.com"></script>
Â  <script src="https://unpkg.com/lucide@latest"></script>

Â  <style>
Â  Â  @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;900&display=swap');

Â  Â  :root {
Â  Â  Â  --accent: #ff0354;
Â  Â  Â  --accent2: #7c3aed;
Â  Â  Â  --bg1: #00010f;
Â  Â  Â  --bg2: #0a1030;
Â  Â  Â  --stroke: rgba(255, 255, 255, .12);
Â  Â  Â  --success: #10b981;
Â  Â  Â  --warning: #f59e0b;
Â  Â  Â  --error: #ef4444;
Â  Â  }

Â  Â  html { scroll-behavior: smooth; }
Â  Â  body {
Â  Â  Â  font-family: 'Outfit', sans-serif;
Â  Â  Â  background:
Â  Â  Â  Â  radial-gradient(1200px 700px at 15% 10%, rgba(124,58,237,.18), transparent 60%),
Â  Â  Â  Â  radial-gradient(900px 600px at 85% 15%, rgba(255,3,84,.16), transparent 55%),
Â  Â  Â  Â  linear-gradient(160deg, var(--bg1), var(--bg2));
Â  Â  Â  min-height: 100vh;
Â  Â  Â  color: rgba(255,255,255,0.9);
Â  Â  Â  overflow-x: hidden;
Â  Â  }

Â  Â  /* Background animations */
Â  Â  .grid-bg { position: fixed; inset: 0; pointer-events: none; opacity: .22; z-index: -2; background-image: linear-gradient(rgba(255,255,255,.06) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,.06) 1px, transparent 1px); background-size: 52px 52px; mask-image: radial-gradient(ellipse at center, rgba(0,0,0,.95) 0%, rgba(0,0,0,.20) 55%, transparent 75%); animation: gridFloat 12s ease-in-out infinite; }
Â  Â  @keyframes gridFloat { 0%,100% { transform: translate3d(0,0,0) scale(1); } 50% { transform: translate3d(0,-10px,0) scale(1.02); } }
Â  Â  .aurora { position: fixed; inset: -20%; pointer-events: none; filter: blur(46px) saturate(125%); opacity: .90; z-index: -3; }
Â  Â  .blob { position: absolute; width: clamp(320px, 40vw, 560px); height: clamp(320px, 40vw, 560px); border-radius: 999px; background: radial-gradient(circle at 30% 30%, rgba(255,3,84,.35), transparent 60%), radial-gradient(circle at 70% 70%, rgba(124,58,237,.35), transparent 60%); animation: blob 14s ease-in-out infinite; mix-blend-mode: screen; }
Â  Â  .blob.b1 { left: 8%; top: 8%; }
Â  Â  .blob.b2 { width: clamp(360px, 48vw, 680px); height: clamp(360px, 48vw, 680px); left: 62%; top: 18%; background: radial-gradient(circle at 30% 30%, rgba(124,58,237,.38), transparent 60%), radial-gradient(circle at 70% 70%, rgba(255,3,84,.28), transparent 60%); animation-duration: 18s; animation-delay: -3s; }
Â  Â  @keyframes blob { 0%,100% { transform: translate(0,0) scale(1); } 30% { transform: translate(40px, 18px) scale(1.08); } 60% { transform: translate(-28px, 34px) scale(0.98); } }
Â  Â  .noise { position: fixed; inset: 0; pointer-events: none; opacity: .09; z-index: -1; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E"); mix-blend-mode: overlay; }

Â  Â  /* UI Elements */
Â  Â  .glass { background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.05)); border: 1px solid var(--stroke); box-shadow: 0 18px 60px rgba(0,0,0,.50), inset 0 1px 0 rgba(255,255,255,.10); backdrop-filter: blur(18px); }
Â  Â  .glass-soft { background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.10); backdrop-filter: blur(14px); }
Â  Â  .lift { transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease; }
Â  Â  .lift:hover { transform: translateY(-3px); box-shadow: 0 20px 40px rgba(0,0,0,.6); }

Â  Â  .btn-primary { background: linear-gradient(135deg, rgba(255,3,84,1), rgba(124,58,237,1)); box-shadow: 0 12px 26px rgba(255,3,84,.18), 0 10px 32px rgba(124,58,237,.16); transition: all 0.2s; }
Â  Â  .btn-primary:hover { filter: brightness(1.15); box-shadow: 0 14px 30px rgba(255,3,84,.3); transform: translateY(-1px); }
Â  Â  .btn-ghost { background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.12); transition: all 0.2s; }
Â  Â  .btn-ghost:hover { background: rgba(255,255,255,.12); border-color: rgba(255,255,255,.2); }

Â  Â  .v-input { width: 100%; border-radius: 12px; padding: 10px 14px; background: rgba(0,0,0,.45); border: 1px solid rgba(255,255,255,.14); color: white; outline: none; transition: all 0.2s; }
Â  Â  .v-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(255,3,84,.15); background: rgba(0,0,0,.6); }
Â  Â Â 
Â  Â  .brand-logo { height: 36px; width: auto; max-width: 140px; object-fit: contain; filter: drop-shadow(0 10px 22px rgba(255,3,84,.25)); }

Â  Â  ::-webkit-scrollbar { width: 8px; }
Â  Â  ::-webkit-scrollbar-thumb { background: rgba(255,3,84, 0.6); border-radius: 10px; }
Â  Â  ::-webkit-scrollbar-track { background: transparent; }

Â  Â  .view-hidden { display: none !important; }
Â  Â  .tab-active { border-bottom: 2px solid var(--accent); color: white; }
Â  Â  .tab-inactive { color: rgba(255,255,255,0.5); border-bottom: 2px solid transparent; }
Â  Â  .tab-inactive:hover { color: rgba(255,255,255,0.9); }

Â  Â  .glow-card { position: relative; }
Â  Â  .glow-card::before {
Â  Â  Â  content: ''; position: absolute; inset: -1px; border-radius: inherit; padding: 1px;
Â  Â  Â  background: linear-gradient(135deg, var(--accent), var(--accent2));
Â  Â  Â  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
Â  Â  Â  -webkit-mask-composite: xor; mask-composite: exclude; pointer-events: none;
Â  Â  }
Â  Â Â 
Â  Â  .type-card { transition: all 0.3s; }
Â  Â  .type-card.active { border-color: var(--accent); background: rgba(255,3,84,0.05); box-shadow: 0 0 0 1px var(--accent), 0 10px 30px rgba(255,3,84,0.15); }
Â  Â  .type-card.active .icon-container { background: var(--accent); color: white; }

Â  Â  #toast-container { position: fixed; top: 20px; right: 20px; z-index: 9999; display: flex; flex-direction: column; gap: 10px; }
Â  Â  .toast { background: rgba(10, 16, 48, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-left: 4px solid var(--accent); color: white; padding: 16px 20px; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); display: flex; align-items: center; gap: 12px; min-width: 300px; transform: translateX(100%); opacity: 0; animation: slideIn 0.4s forwards; }
Â  Â  .toast.success { border-left-color: var(--success); }
Â  Â  .toast.error { border-left-color: var(--error); }
Â  Â  @keyframes slideIn { to { transform: translateX(0); opacity: 1; } }
Â  Â  @keyframes fadeOut { to { transform: translateX(100%); opacity: 0; } }
Â  Â Â 
Â  Â  /* InfoBar Transition */
Â  Â  #info-bar-container { transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); transform-origin: top; }
Â  Â  .bar-hidden { transform: translateY(-100%); opacity: 0; margin-bottom: -44px; }
Â  Â  .bar-visible { transform: translateY(0); opacity: 1; margin-bottom: 0; }

Â  Â  /* Store specific cards */
Â  Â  .shop-card { border: 1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.03); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
Â  Â  .shop-card:hover { border-color: var(--accent); background: rgba(255,255,255,0.06); }
Â  </style>
</head>
<body class="selection:bg-[#ff0354]/40 selection:text-white">

Â  <div id="info-bar-container" class="bar-hidden relative z-[100] w-full px-4 py-3 text-center text-sm font-bold shadow-xl">
Â  Â  Â  <span id="info-bar-text"></span>
Â  Â  Â  <a id="info-bar-link" href="#" target="_blank" class="ml-3 underline decoration-white/30 hover:decoration-white underline-offset-2 opacity-80 hover:opacity-100 hidden"></a>
Â  </div>

Â  <div id="toast-container"></div>

Â  <div class="aurora" aria-hidden="true"><div class="blob b1"></div><div class="blob b2"></div></div>
Â  <div class="grid-bg" aria-hidden="true"></div>
Â  <div class="noise" aria-hidden="true"></div>

Â  <header class="sticky top-0 z-40 glass-soft border-b border-white/10">
Â  Â  <div class="mx-auto max-w-7xl px-4 py-3 flex items-center justify-between gap-4">
Â  Â  Â  <a href="#" onclick="switchMainView('market')" class="flex items-center gap-3 shrink-0 lift group">
Â  Â  Â  Â  <img src="https://i.imgur.com/NDhlWyz.png" alt="Velorie" class="brand-logo group-hover:scale-105 transition-transform" />
Â  Â  Â  Â  <div class="hidden sm:block leading-tight min-w-0">
Â  Â  Â  Â  Â  <div class="text-base sm:text-lg font-bold tracking-tight truncate">Velorie Market</div>
Â  Â  Â  Â  Â  <div class="text-[11px] text-white/60 truncate">Platforma ogÅ‚oszeniowa</div>
Â  Â  Â  Â  </div>
Â  Â  Â  </a>

Â  Â  Â  <div class="flex items-center gap-2 sm:gap-3 shrink-0">
Â  Â  Â  Â Â 
Â  Â  Â  Â  <a href="wallet.html" title="TwÃ³j Portfel" class="flex items-center gap-2 rounded-xl glass-soft px-3 py-1.5 text-sm font-bold text-[#e2b714] border border-[#e2b714]/30 hover:bg-[#e2b714]/10 transition lift">
Â  Â  Â  Â  Â  <i data-lucide="coins" class="h-4 w-4"></i>
Â  Â  Â  Â  Â  <span><span id="header-vpln">...</span> <span class="text-[11px] text-[#e2b714]/70">vPLN</span></span>
Â  Â  Â  Â  </a>

Â  Â  Â  Â  <button onclick="switchMainView('add-listing')" class="hidden sm:inline-flex items-center gap-2 rounded-xl btn-primary lift px-4 py-2 text-sm font-semibold">
Â  Â  Â  Â  Â  <i data-lucide="plus" class="h-4 w-4"></i>
Â  Â  Â  Â  Â  <span>ZleÄ‡ pracÄ™ / Dodaj profil</span>
Â  Â  Â  Â  </button>

Â  Â  Â  Â  <button class="relative hidden sm:inline-flex items-center justify-center h-10 w-10 rounded-xl glass lift hover:text-[var(--accent)] transition text-white/70">
Â  Â  Â  Â  Â  <i data-lucide="bell" class="h-5 w-5"></i>
Â  Â  Â  Â  </button>

Â  Â  Â  Â  <button onclick="switchMainView('dashboard'); switchDashTab('profil')" class="relative inline-flex items-center justify-center h-10 w-10 rounded-xl glass lift border border-[var(--accent)]/50">
Â  Â  Â  Â  Â  <img id="user-avatar-header" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="User" class="h-full w-full rounded-xl p-0.5 object-cover" />
Â  Â  Â  Â  Â  <div class="absolute -top-1 -right-1 h-3.5 w-3.5 rounded-full bg-green-500 border-2 border-[#0a1030]"></div>
Â  Â  Â  Â  </button>
Â  Â  Â  </div>
Â  Â  </div>
Â  </header>

Â  <main class="mx-auto max-w-7xl px-4 py-8 relative z-10 min-h-[80vh]">

Â  Â  <div id="view-market" class="space-y-6">
Â  Â  Â  <div class="flex flex-col md:flex-row md:items-end justify-between gap-4">
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <h1 class="text-3xl sm:text-4xl font-black tracking-tight">Eksploruj Rynek</h1>
Â  Â  Â  Â  Â  <p class="text-white/60 text-sm mt-1 max-w-xl">ZnajdÅº idealnego wykonawcÄ™ do swojego projektu lub przejrzyj tablicÄ™ ogÅ‚oszeÅ„ i zdobÄ…dÅº nowe zlecenia bez poÅ›rednikÃ³w.</p>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="flex gap-6 border-b border-white/10 text-sm font-semibold pb-[1px] overflow-x-auto whitespace-nowrap">
Â  Â  Â  Â  Â  <button onclick="switchMarketTab('zlecenia')" id="tab-zlecenia" class="tab-active pb-2 px-1 transition-colors flex items-center gap-2">
Â  Â  Â  Â  Â  Â  <i data-lucide="briefcase" class="h-4 w-4"></i> Szukam zlecenia
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  <button onclick="switchMarketTab('freelancerzy')" id="tab-freelancerzy" class="tab-inactive pb-2 px-1 transition-colors flex items-center gap-2">
Â  Â  Â  Â  Â  Â  <i data-lucide="users" class="h-4 w-4"></i> Szukam freelancera
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div class="glass rounded-2xl p-5 border-l-4 border-[var(--accent2)]">
Â  Â  Â  Â  <div class="flex items-center justify-between mb-4">
Â  Â  Â  Â  Â  <div class="text-sm font-bold text-white flex items-center gap-2">
Â  Â  Â  Â  Â  Â  <i data-lucide="sliders-horizontal" class="h-4 w-4 text-[var(--accent2)]"></i> Zaawansowane filtry
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <button class="text-xs text-white/50 hover:text-white flex items-center gap-1 transition">
Â  Â  Â  Â  Â  Â  <i data-lucide="rotate-ccw" class="h-3 w-3"></i> Resetuj
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
Â  Â  Â  Â  Â  <div class="lg:col-span-2 relative">
Â  Â  Â  Â  Â  Â  <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-white/40"></i>
Â  Â  Â  Â  Â  Â  <input type="text" placeholder="Wpisz sÅ‚owo kluczowe, tag, technologiÄ™..." class="v-input pl-10 text-sm" />
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div><select class="v-input text-sm text-white/80"><option>Wszystkie kategorie</option></select></div>
Â  Â  Â  Â  Â  <div><select class="v-input text-sm text-white/80"><option>Dowolny BudÅ¼et</option></select></div>
Â  Â  Â  Â  Â  <div><select class="v-input text-sm text-white/80 bg-[var(--accent)]/10 border-[var(--accent)]/30 text-[var(--accent)]"><option>Sortuj: NajwiÄ™cej podbiÄ‡ ğŸ”¥</option></select></div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div id="market-list" class="grid lg:grid-cols-2 xl:grid-cols-3 gap-6 pt-2"></div>
Â  Â  </div>

Â  Â  <div id="view-add-listing" class="view-hidden max-w-4xl mx-auto space-y-8">
Â  Â  Â Â 
Â  Â  Â  <div class="flex items-center gap-3">
Â  Â  Â  Â  <button onclick="switchMainView('market')" class="btn-ghost p-2 rounded-xl lift group">
Â  Â  Â  Â  Â  <i data-lucide="arrow-left" class="h-5 w-5 group-hover:-translate-x-1 transition-transform"></i>
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  <h1 class="text-3xl font-black tracking-tight">Kreator OgÅ‚oszenia</h1>
Â  Â  Â  Â  Â  <p class="text-white/50 text-sm mt-1">Sprecyzuj czego potrzebujesz i pojaw siÄ™ na rynku gÅ‚Ã³wnym Velorie.</p>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <div>
Â  Â  Â  Â  <h2 class="text-sm font-bold uppercase tracking-wider text-white/50 mb-4">1. Kim jesteÅ› i czego szukasz?</h2>
Â  Â  Â  Â  <div class="grid sm:grid-cols-2 gap-5">
Â  Â  Â  Â  Â  <div id="type-btn-zlecenie" onclick="selectListingType('zlecenie')" class="type-card glass rounded-3xl p-6 cursor-pointer flex gap-4 active">
Â  Â  Â  Â  Â  Â  <div class="icon-container shrink-0 w-12 h-12 rounded-2xl bg-white/5 flex items-center justify-center text-white/50 transition-colors">
Â  Â  Â  Â  Â  Â  Â  <i data-lucide="briefcase" class="h-6 w-6"></i>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-bold mb-1 text-white">Zleceniodawca</h3>
Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-white/50 leading-relaxed">Mam projekt do zrobienia, ustalam budÅ¼et i szukam wykonawcy.</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div id="type-btn-profil" onclick="selectListingType('profil')" class="type-card glass rounded-3xl p-6 cursor-pointer flex gap-4 border-white/10 hover:border-white/20 hover:bg-white/5">
Â  Â  Â  Â  Â  Â  <div class="icon-container shrink-0 w-12 h-12 rounded-2xl bg-white/5 flex items-center justify-center text-white/50 transition-colors">
Â  Â  Â  Â  Â  Â  Â  <i data-lucide="user-check" class="h-6 w-6"></i>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-bold mb-1 text-white">Freelancer</h3>
Â  Â  Â  Â  Â  Â  Â  <p class="text-xs text-white/50 leading-relaxed">ChcÄ™ wystawiÄ‡ profil ze swoimi umiejÄ™tnoÅ›ciami i przyjmowaÄ‡ zlecenia.</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>

Â  Â  Â  <form id="form-zlecenie" class="glass rounded-3xl p-6 sm:p-8 space-y-6" onsubmit="submitListing(event)">
Â  Â  Â  Â  <h2 class="text-sm font-bold uppercase tracking-wider text-white/50 mb-4 border-b border-white/10 pb-2">2. SzczegÃ³Å‚y Twojego projektu</h2>
Â  Â  Â  Â  <div class="space-y-5">
Â  Â  Â  Â  Â  <div><label class="block text-xs font-semibold uppercase text-white/70 mb-1.5">KrÃ³tki, chwytliwy tytuÅ‚ <span class="text-[var(--accent)]">*</span></label><input type="text" class="v-input font-medium" required /></div>
Â  Â  Â  Â  Â  <div><label class="block text-xs font-semibold uppercase text-white/70 mb-1.5">Opis zlecenia <span class="text-[var(--accent)]">*</span></label><textarea class="v-input min-h-[140px]" required></textarea></div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="border-t border-white/10 pt-6 flex justify-end gap-3">
Â  Â  Â  Â  Â  <button type="button" onclick="switchMainView('market')" class="btn-ghost lift px-6 py-3 rounded-xl text-sm font-bold">Anuluj</button>
Â  Â  Â  Â  Â  <button type="submit" class="btn-primary lift px-8 py-3 rounded-xl text-sm font-bold flex items-center gap-2 shadow-lg shadow-[var(--accent)]/20">Opublikuj zlecenie <i data-lucide="check-circle" class="h-4 w-4"></i></button>
Â  Â  Â  Â  </div>
Â  Â  Â  </form>

Â  Â  Â  <form id="form-profil" class="glass rounded-3xl p-6 sm:p-8 space-y-6 hidden" onsubmit="submitListing(event)">
Â  Â  Â  Â  Â <h2 class="text-sm font-bold uppercase tracking-wider text-white/50 mb-4 border-b border-white/10 pb-2">2. Twoja wizytÃ³wka profesjonalisty</h2>
Â  Â  Â  Â  Â <div class="space-y-5">
Â  Â  Â  Â  Â  Â <div><label class="block text-xs font-semibold uppercase text-white/70 mb-1.5">TwÃ³j TytuÅ‚ / Rola <span class="text-[var(--accent)]">*</span></label><input type="text" class="v-input" required /></div>
Â  Â  Â  Â  Â  Â <div><label class="block text-xs font-semibold uppercase text-white/70 mb-1.5">Bio / Opis doÅ›wiadczenia <span class="text-[var(--accent)]">*</span></label><textarea class="v-input min-h-[140px]" required></textarea></div>
Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â <div class="border-t border-white/10 pt-6 flex justify-end gap-3">
Â  Â  Â  Â  Â  Â <button type="button" onclick="switchMainView('market')" class="btn-ghost lift px-6 py-3 rounded-xl text-sm font-bold">Anuluj</button>
Â  Â  Â  Â  Â  Â <button type="submit" class="bg-gradient-to-r from-[var(--accent2)] to-[#5b21b6] hover:brightness-110 shadow-lg shadow-[var(--accent2)]/20 transition-all lift px-8 py-3 rounded-xl text-sm font-bold text-white flex items-center gap-2 border border-white/10">Wystaw profil <i data-lucide="sparkles" class="h-4 w-4"></i></button>
Â  Â  Â  Â  Â </div>
Â  Â  Â  </form>

Â  Â  </div>

Â  Â  <div id="view-dashboard" class="view-hidden">
Â  Â  Â  <div class="flex items-center gap-3 mb-8">
Â  Â  Â  Â  <button onclick="switchMainView('market')" class="btn-ghost p-2 rounded-xl lift group">
Â  Â  Â  Â  Â  <i data-lucide="arrow-left" class="h-5 w-5 group-hover:-translate-x-1 transition-transform"></i>
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <h1 class="text-3xl font-black tracking-tight">Panel UÅ¼ytkownika</h1>
Â  Â  Â  </div>

Â  Â  Â  <div class="grid lg:grid-cols-12 gap-8 items-start">
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="lg:col-span-3 glass rounded-2xl p-3 flex flex-col gap-1 sticky top-24">
Â  Â  Â  Â  Â  <div class="p-4 flex items-center gap-3 border-b border-white/10 mb-2">
Â  Â  Â  Â  Â  Â  <img id="user-avatar-dash" src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" class="h-12 w-12 rounded-full border border-white/20 bg-black/50" />
Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <div class="font-bold flex items-center gap-1 text-sm">
Â  Â  Â  Â  Â  Â  Â  Â  <span id="user-display-name">...</span>
Â  Â  Â  Â  Â  Â  Â  Â  <i id="user-verified-badge" data-lucide="badge-check" class="h-4 w-4 text-green-400 hidden" title="Zweryfikowany uÅ¼ytkownik"></i>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="text-[11px] text-white/50">Plan: <span id="user-role-display">UÅ¼ytkownik</span></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <button onclick="switchDashTab('profil')" id="dash-btn-profil" class="text-left px-4 py-3 rounded-xl hover:bg-white/5 transition flex items-center gap-3 text-sm font-medium text-white/70"><i data-lucide="user-cog" class="h-4 w-4"></i> Ustawienia konta</button>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <button onclick="switchDashTab('sklep')" id="dash-btn-sklep" class="text-left px-4 py-3 rounded-xl hover:bg-white/5 transition flex items-center gap-3 text-sm font-medium text-white/70"><i data-lucide="shopping-cart" class="h-4 w-4"></i> Sklep & Subskrypcje</button>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <button onclick="switchDashTab('moje-ogloszenia')" id="dash-btn-moje-ogloszenia" class="text-left px-4 py-3 rounded-xl hover:bg-white/5 transition flex items-center gap-3 text-sm font-medium text-white/70"><i data-lucide="layers" class="h-4 w-4"></i> Moje ogÅ‚oszenia</button>

Â  Â  Â  Â  Â  <button onclick="logoutUser()" class="text-left px-4 py-3 rounded-xl hover:bg-red-500/10 text-red-400 transition flex items-center gap-3 text-sm font-medium mt-auto border-t border-white/5 pt-3"><i data-lucide="log-out" class="h-4 w-4"></i> Wyloguj siÄ™</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="lg:col-span-9">
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <div id="dash-profil" class="space-y-6 hidden">
Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center mb-2">
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold">Ustawienia Konta</h2>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm text-white/50">ZarzÄ…dzaj swoimi danymi i preferencjami.</p>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <a href="wallet.html" class="btn-primary lift px-5 py-2.5 rounded-xl text-sm font-bold flex items-center gap-2 border border-[#e2b714]/50 shadow-[0_0_15px_rgba(226,183,20,0.3)] bg-gradient-to-br from-[#e2b714] to-[#c79a0b] text-black">
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="wallet" class="h-4 w-4"></i> DoÅ‚aduj vPLN
Â  Â  Â  Â  Â  Â  Â  </a>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div class="glass rounded-3xl p-6 sm:p-8 space-y-6">
Â  Â  Â  Â  Â  Â  Â  <div class="grid sm:grid-cols-2 gap-5">
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-xs font-semibold uppercase text-white/70 mb-1.5">Nazwa uÅ¼ytkownika</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="setting-username" class="v-input text-white/50 cursor-not-allowed" value="..." readonly title="Nie moÅ¼na zmieniÄ‡ nazwy" />
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-xs font-semibold uppercase text-white/70 mb-1.5">Adres E-mail</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="email" id="setting-email" class="v-input text-white/50 cursor-not-allowed" value="..." readonly title="Nie moÅ¼na zmieniÄ‡ emaila" />
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-xs font-semibold uppercase text-white/70 mb-1.5">Discord ID (Pobrano z Autoryzacji)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="setting-discord" class="v-input text-white/50 cursor-not-allowed" readonly placeholder="Brak poÅ‚Ä…czenia" />
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-xs font-semibold uppercase text-white/70 mb-1.5">Link do Portfolio / GitHub</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="url" id="setting-portfolio" class="v-input" placeholder="https://" />
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-end pt-4 border-t border-white/10">
Â  Â  Â  Â  Â  Â  Â  Â  <button type="button" onclick="showToast('Funkcja edycji dostÄ™pna wkrÃ³tce!', 'info')" class="btn-ghost lift px-6 py-2.5 rounded-xl text-sm font-bold">Zapisz zmiany</button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div id="dash-sklep" class="space-y-6 hidden">
Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â <h2 class="text-2xl font-bold">Sklep & Subskrypcje</h2>
Â  Â  Â  Â  Â  Â  Â  Â <p class="text-sm text-white/50">Wzmocnij swojÄ… obecnoÅ›Ä‡ na rynku i zdobÄ…dÅº zaufanie klientÃ³w.</p>
Â  Â  Â  Â  Â  Â  Â </div>

Â  Â  Â  Â  Â  Â  Â <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
Â  Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â  Â <div class="shop-card rounded-3xl p-6 flex flex-col h-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="mb-4 flex items-center justify-between">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="w-12 h-12 rounded-2xl bg-green-500/10 flex items-center justify-center text-green-400">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <i data-lucide="shield-check" class="w-7 h-7"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="text-xs font-bold text-green-400 bg-green-400/10 px-2 py-1 rounded-lg">TRUSTED</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 class="text-lg font-bold mb-2">Weryfikacja Profilu</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="text-2xl font-black mb-4">29.99 <span class="text-xs text-white/40 font-normal">vPLN / mies.</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â <p class="text-xs text-white/60 mb-6 leading-relaxed">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Zyskaj plakietkÄ™ "Zweryfikowany", ktÃ³ra buduje ogromne zaufanie wÅ›rÃ³d zleceniodawcÃ³w.Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <br><br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="text-amber-400/80 font-semibold italic">âš ï¸ Uwaga: Kupno subskrypcji to tylko pierwszy krok. Profil musi zostaÄ‡ rÄ™cznie zweryfikowany przez administracjÄ™ VelorieMarket (czas oczekiwania do 48h). Sam znaczek bez weryfikacji nie zostanie nadany.</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â <button onclick="buyVerification()" id="btn-buy-verification" class="mt-auto btn-ghost w-full py-3 rounded-xl font-bold text-sm">ZÅ‚Ã³Å¼ wniosek (29.99 vPLN)</button>
Â  Â  Â  Â  Â  Â  Â  Â </div>

Â  Â  Â  Â  Â  Â  Â  Â <div class="shop-card rounded-3xl p-6 flex flex-col h-full border-[var(--accent)]/20 relative overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="absolute -right-4 -top-4 opacity-10 rotate-12"><i data-lucide="megaphone" class="w-24 h-24 text-[var(--accent)]"></i></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="w-12 h-12 rounded-2xl bg-[var(--accent)]/10 flex items-center justify-center text-[var(--accent)]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <i data-lucide="layout-template" class="w-7 h-7"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 class="text-lg font-bold mb-2">Banner Reklamowy</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="text-2xl font-black mb-4">80.00 <span class="text-xs text-white/40 font-normal">vPLN / mies.</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â <ul class="text-xs text-white/60 space-y-2 mb-6 leading-relaxed">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-[var(--accent)]"></i> Reklama serwera Minecraft/Discord inne</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-[var(--accent)]"></i> Banner na samej gÃ³rze marketu</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-[var(--accent)]"></i> Maksymalne promowanie (1600x400)</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-[var(--accent)]"></i> WidocznoÅ›Ä‡ Banneru przez peÅ‚ne 30 Dni</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <li class="mt-3 text-[10px] italic border-t border-white/5 pt-2">Banner musi byÄ‡ zgodny z regulaminem. Weryfikacja grafiki trwa do 24h.</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â </ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â <button onclick="showToast('PrzeÅ›lij grafikÄ™ do panelu...', 'info')" class="mt-auto btn-primary w-full py-3 rounded-xl font-bold text-sm">Zarezerwuj miejsce</button>
Â  Â  Â  Â  Â  Â  Â  Â </div>

Â  Â  Â  Â  Â  Â  Â  Â <div class="shop-card rounded-3xl p-6 flex flex-col h-full border-[var(--accent2)]/20">
Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="mb-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="w-12 h-12 rounded-2xl bg-[var(--accent2)]/10 flex items-center justify-center text-[var(--accent2)]">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <i data-lucide="palette" class="w-7 h-7"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â <h3 class="text-lg font-bold mb-2">Portfolio Hub</h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â <div class="text-2xl font-black mb-4">49.99 <span class="text-xs text-white/40 font-normal">vPLN / 3 mies.</span></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â <ul class="text-xs text-white/60 space-y-2 mb-6">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <li class="flex items-center gap-2"><i data-lucide="plus" class="w-3 h-3 text-[var(--accent2)]"></i> StwÃ³rz wÅ‚asne portfolio</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <li class="flex items-center gap-2"><i data-lucide="plus" class="w-3 h-3 text-[var(--accent2)]"></i> Podepnij wÅ‚asnÄ… domenÄ™</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <li class="flex items-center gap-2"><i data-lucide="plus" class="w-3 h-3 text-[var(--accent2)]"></i> Personalizacja pod TwÃ³j styl</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â </ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â <button onclick="showToast('Kreator portfolio wkrÃ³tce!', 'info')" class="mt-auto btn-ghost w-full py-3 rounded-xl font-bold text-sm text-[var(--accent2)]">Rozpocznij projekt</button>
Â  Â  Â  Â  Â  Â  Â  Â </div>

Â  Â  Â  Â  Â  Â  Â </div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  <div id="dash-moje-ogloszenia" class="space-y-6 hidden">
Â  Â  Â  Â  Â  Â  Â <div><h2 class="text-2xl font-bold">ZarzÄ…dzaj OgÅ‚oszeniami</h2><p class="text-sm text-white/50">W przygotowaniu...</p></div>
Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>

Â  </main>

Â  <script>
Â  Â  // === PRZECHWYTYWANIE TOKENA (OAUTH2 DISCORD) ===
Â  Â  const params = new URLSearchParams(window.location.search);
Â  Â  const token = params.get('token');
Â  Â  if (token) {
Â  Â  Â  Â  localStorage.setItem('token', token);
Â  Â  Â  Â  window.history.replaceState({}, document.title, "/market");Â 
Â  Â  }

Â  Â  lucide.createIcons();

Â  Â  function showToast(message, type = 'info') {
Â  Â  Â  Â  const container = document.getElementById('toast-container');
Â  Â  Â  Â  const toast = document.createElement('div');
Â  Â  Â  Â Â 
Â  Â  Â  Â  let typeClass = '';
Â  Â  Â  Â  let iconName = 'info';
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (type === 'success') { typeClass = 'success'; iconName = 'check-circle'; }Â 
Â  Â  Â  Â  else if (type === 'error') { typeClass = 'error'; iconName = 'alert-octagon'; }

Â  Â  Â  Â  toast.className = `toast ${typeClass}`;
Â  Â  Â  Â  toast.innerHTML = `<i data-lucide="${iconName}" class="w-6 h-6"></i><span class="font-medium text-sm">${message}</span>`;
Â  Â  Â  Â  container.appendChild(toast);
Â  Â  Â  Â  lucide.createIcons();Â 

Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  toast.style.animation = 'fadeOut 0.4s forwards';
Â  Â  Â  Â  Â  Â  setTimeout(() => toast.remove(), 400);
Â  Â  Â  Â  }, 4000);
Â  Â  }

Â  Â  // === POBIERANIE DANYCH Z SERWERA ===
Â  Â  async function fetchUserData() {
Â  Â  Â  Â  const token = localStorage.getItem('token');
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (!token) {
Â  Â  Â  Â  Â  Â  window.location.href = '/login';
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch('/api/me', {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'GET',
Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Authorization': `Bearer ${token}`
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  if (!response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  throw new Error('Sesja wygasÅ‚a');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const userData = await response.json();

Â  Â  Â  Â  Â  Â  document.getElementById('user-display-name').textContent = userData.username;
Â  Â  Â  Â  Â  Â  document.getElementById('user-role-display').textContent = userData.role === 'freelancer' ? 'Freelancer' : 'Zleceniodawca';
Â  Â  Â  Â  Â  Â  document.getElementById('header-vpln').textContent = parseFloat(userData.vpln).toFixed(2);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Znaczek weryfikacji obok nicku
Â  Â  Â  Â  Â  Â  const verifiedBadge = document.getElementById('user-verified-badge');
Â  Â  Â  Â  Â  Â  if (userData.isVerified) {
Â  Â  Â  Â  Â  Â  Â  Â  verifiedBadge.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  verifiedBadge.classList.add('hidden');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  // ObsÅ‚uga przycisku kupowania w sklepie
Â  Â  Â  Â  Â  Â  const buyVerBtn = document.getElementById('btn-buy-verification');
Â  Â  Â  Â  Â  Â  if (userData.verificationStatus === 'pending') {
Â  Â  Â  Â  Â  Â  Â  Â  buyVerBtn.textContent = 'Oczekuje na akceptacjÄ™...';
Â  Â  Â  Â  Â  Â  Â  Â  buyVerBtn.classList.add('cursor-not-allowed', 'opacity-50');
Â  Â  Â  Â  Â  Â  Â  Â  buyVerBtn.onclick = null;
Â  Â  Â  Â  Â  Â  } else if (userData.verificationStatus === 'active' || userData.isVerified) {
Â  Â  Â  Â  Â  Â  Â  Â  buyVerBtn.textContent = 'UsÅ‚uga aktywna';
Â  Â  Â  Â  Â  Â  Â  Â  buyVerBtn.classList.add('cursor-not-allowed', 'opacity-50', 'text-green-400');
Â  Â  Â  Â  Â  Â  Â  Â  buyVerBtn.onclick = null;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  buyVerBtn.textContent = 'ZÅ‚Ã³Å¼ wniosek (29.99 vPLN)';
Â  Â  Â  Â  Â  Â  Â  Â  buyVerBtn.classList.remove('cursor-not-allowed', 'opacity-50', 'text-green-400');
Â  Â  Â  Â  Â  Â  Â  Â  buyVerBtn.onclick = buyVerification;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (userData.avatar) {
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('user-avatar-header').src = userData.avatar;
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('user-avatar-dash').src = userData.avatar;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  document.getElementById('setting-username').value = userData.username;
Â  Â  Â  Â  Â  Â  document.getElementById('setting-email').value = userData.email;
Â  Â  Â  Â  Â  Â  document.getElementById('setting-discord').value = userData.discordId || 'NiepodpiÄ™ty';
Â  Â  Â  Â  Â  Â  document.getElementById('setting-portfolio').value = userData.portfolioLink || '';

Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error("BÅ‚Ä…d autoryzacji:", error);
Â  Â  Â  Â  Â  Â  localStorage.removeItem('token');
Â  Â  Â  Â  Â  Â  window.location.href = '/login';
Â  Â  Â  Â  }
Â  Â  }

Â  Â  // === ZAKUP WERYFIKACJI W SKLEPIE ===
Â  Â  async function buyVerification() {
Â  Â  Â  Â  const token = localStorage.getItem('token');
Â  Â  Â  Â  if(!confirm("Czy na pewno chcesz zÅ‚oÅ¼yÄ‡ wniosek o weryfikacjÄ™ konta za 29.99 vPLN? Upewnij siÄ™, Å¼e TwÃ³j profil nie narusza regulaminu.")) return;

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch('/api/shop/buy-verification', {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  'Authorization': `Bearer ${token}`
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });

Â  Â  Â  Â  Â  Â  const data = await response.json();

Â  Â  Â  Â  Â  Â  if (response.ok) {
Â  Â  Â  Â  Â  Â  Â  Â  showToast(data.message, "success");
Â  Â  Â  Â  Â  Â  Â  Â  fetchUserData(); // OdÅ›wieÅ¼ dane by przycisk zablokowaÄ‡
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  showToast(data.error, "error");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  showToast("BÅ‚Ä…d poÅ‚Ä…czenia z serwerem.", "error");
Â  Â  Â  Â  }
Â  Â  }

Â  Â  let lastBarData = null;
Â  Â  async function fetchInfoBar() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch('/api/infobar?page=market');
Â  Â  Â  Â  Â  Â  if (!response.ok) return;
Â  Â  Â  Â  Â  Â  const data = await response.json();

Â  Â  Â  Â  Â  Â  if (JSON.stringify(data) !== JSON.stringify(lastBarData)) {
Â  Â  Â  Â  Â  Â  Â  Â  lastBarData = data;
Â  Â  Â  Â  Â  Â  Â  Â  updateInfoBarUI(data);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  console.error('BÅ‚Ä…d paska info:', err);
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function updateInfoBarUI(data) {
Â  Â  Â  Â  const bar = document.getElementById('info-bar-container');
Â  Â  Â  Â  const text = document.getElementById('info-bar-text');
Â  Â  Â  Â  const link = document.getElementById('info-bar-link');

Â  Â  Â  Â  if (data.isActive) {
Â  Â  Â  Â  Â  Â  bar.style.backgroundColor = data.bgColor || '#ff0354';
Â  Â  Â  Â  Â  Â  bar.style.color = data.textColor || '#ffffff';
Â  Â  Â  Â  Â  Â  text.innerText = data.text;

Â  Â  Â  Â  Â  Â  if (data.linkText && data.linkUrl) {
Â  Â  Â  Â  Â  Â  Â  Â  link.innerText = data.linkText;
Â  Â  Â  Â  Â  Â  Â  Â  link.href = data.linkUrl;
Â  Â  Â  Â  Â  Â  Â  Â  link.classList.remove('hidden');
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  link.classList.add('hidden');
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  bar.classList.remove('bar-hidden');
Â  Â  Â  Â  Â  Â  bar.classList.add('bar-visible');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  bar.classList.remove('bar-visible');
Â  Â  Â  Â  Â  Â  bar.classList.add('bar-hidden');
Â  Â  Â  Â  }
Â  Â  }

Â  Â  function logoutUser() {
Â  Â  Â  Â  showToast("Wylogowywanie...", "info");
Â  Â  Â  Â  localStorage.removeItem('token');
Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  window.location.href = '/login';
Â  Â  Â  Â  }, 1200);
Â  Â  }

Â  Â  document.addEventListener("DOMContentLoaded", () => {
Â  Â  Â  fetchUserData();
Â  Â  Â  fetchInfoBar();
Â  Â  Â  setInterval(fetchInfoBar, 3000);
Â  Â  Â  lucide.createIcons();
Â  Â  Â  renderJobs();
Â  Â  Â  switchDashTab('profil');
Â  Â  Â  document.getElementById('tab-zlecenia').className = 'tab-active pb-2 px-1 transition-colors flex items-center gap-2';
Â  Â  Â  selectListingType('zlecenie');
Â  Â  });

Â  Â  function renderJobs() { document.getElementById('market-list').innerHTML = `<div class="glass p-8 text-center rounded-3xl col-span-full border-dashed"><i data-lucide="briefcase" class="w-10 h-10 text-white/30 mx-auto mb-2"></i><h3 class="font-bold text-lg">Zlecenia zaÅ‚adowane</h3></div>`; lucide.createIcons(); }
Â  Â  function renderFreelancers() { document.getElementById('market-list').innerHTML = `<div class="glass p-8 text-center rounded-3xl col-span-full border-dashed"><i data-lucide="users" class="w-10 h-10 text-white/30 mx-auto mb-2"></i><h3 class="font-bold text-lg">Profile freelancerÃ³w zaÅ‚adowane</h3></div>`; lucide.createIcons(); }
Â  Â Â 
Â  Â  function switchMainView(viewId) {
Â  Â  Â  document.getElementById('view-market').classList.add('view-hidden');
Â  Â  Â  document.getElementById('view-dashboard').classList.add('view-hidden');
Â  Â  Â  document.getElementById('view-add-listing').classList.add('view-hidden');
Â  Â  Â  document.getElementById(`view-${viewId}`).classList.remove('view-hidden');
Â  Â  Â  window.scrollTo({ top: 0, behavior: 'smooth' });
Â  Â  }

Â  Â  function switchMarketTab(tab) {
Â  Â  Â  document.getElementById('tab-zlecenia').className = 'tab-inactive pb-2 px-1 transition-colors flex items-center gap-2';
Â  Â  Â  document.getElementById('tab-freelancerzy').className = 'tab-inactive pb-2 px-1 transition-colors flex items-center gap-2';
Â  Â  Â  document.getElementById(`tab-${tab}`).className = 'tab-active pb-2 px-1 transition-colors flex items-center gap-2';
Â  Â  Â  if(tab === 'zlecenia') renderJobs();
Â  Â  Â  if(tab === 'freelancerzy') renderFreelancers();
Â  Â  }

Â  Â  function switchDashTab(tab) {
Â  Â  Â  const btns = document.querySelectorAll('[id^="dash-btn-"]');
Â  Â  Â  btns.forEach(btn => {
Â  Â  Â  Â  btn.classList.remove('bg-[var(--accent)]/10', 'text-[var(--accent)]', 'glow-card');
Â  Â  Â  Â  btn.classList.add('hover:bg-white/5', 'text-white/70');
Â  Â  Â  });
Â  Â  Â  const activeBtn = document.getElementById(`dash-btn-${tab}`);
Â  Â  Â  if(activeBtn) {
Â  Â  Â  Â  activeBtn.classList.remove('hover:bg-white/5', 'text-white/70');
Â  Â  Â  Â  activeBtn.classList.add('bg-[var(--accent)]/10', 'text-[var(--accent)]', 'glow-card');
Â  Â  Â  }
Â  Â  Â  ['profil', 'sklep', 'moje-ogloszenia'].forEach(v => {
Â  Â  Â  Â  const el = document.getElementById(`dash-${v}`);
Â  Â  Â  Â  if(el) el.classList.add('hidden');
Â  Â  Â  });
Â  Â  Â  const activeView = document.getElementById(`dash-${tab}`);
Â  Â  Â  if(activeView) activeView.classList.remove('hidden');
Â  Â  }

Â  Â  function selectListingType(type) {
Â  Â  Â  const btnZlecenie = document.getElementById('type-btn-zlecenie'), btnProfil = document.getElementById('type-btn-profil');
Â  Â  Â  const formZlecenie = document.getElementById('form-zlecenie'), formProfil = document.getElementById('form-profil');

Â  Â  Â  btnZlecenie.className = "type-card glass rounded-3xl p-6 cursor-pointer flex gap-4 border-white/10 hover:border-white/20 hover:bg-white/5";
Â  Â  Â  btnZlecenie.querySelector('.icon-container').className = "icon-container shrink-0 w-12 h-12 rounded-2xl bg-white/5 flex items-center justify-center text-white/50 transition-colors";
Â  Â  Â  btnProfil.className = "type-card glass rounded-3xl p-6 cursor-pointer flex gap-4 border-white/10 hover:border-white/20 hover:bg-white/5";
Â  Â  Â  btnProfil.querySelector('.icon-container').className = "icon-container shrink-0 w-12 h-12 rounded-2xl bg-white/5 flex items-center justify-center text-white/50 transition-colors";

Â  Â  Â  formZlecenie.classList.add('hidden'); formProfil.classList.add('hidden');

Â  Â  Â  if(type === 'zlecenie') {
Â  Â  Â  Â  btnZlecenie.className = "type-card glass rounded-3xl p-6 cursor-pointer flex gap-4 active";
Â  Â  Â  Â  btnZlecenie.querySelector('.icon-container').className = "icon-container shrink-0 w-12 h-12 rounded-2xl bg-[var(--accent)] flex items-center justify-center text-white transition-colors shadow-lg shadow-[var(--accent)]/20";
Â  Â  Â  Â  formZlecenie.classList.remove('hidden');
Â  Â  Â  } else {
Â  Â  Â  Â  btnProfil.className = "type-card glass rounded-3xl p-6 cursor-pointer flex gap-4 active border-[var(--accent2)] bg-[var(--accent2)]/5 shadow-[0_0_0_1px_var(--accent2),_0_10px_30px_rgba(124,58,237,0.15)]";
Â  Â  Â  Â  btnProfil.querySelector('.icon-container').className = "icon-container shrink-0 w-12 h-12 rounded-2xl bg-[var(--accent2)] flex items-center justify-center text-white transition-colors shadow-lg shadow-[var(--accent2)]/20";
Â  Â  Â  Â  formProfil.classList.remove('hidden');
Â  Â  Â  }
Â  Â  }

Â  Â  function submitListing(e) {
Â  Â  Â  e.preventDefault();
Â  Â  Â  switchMainView('dashboard');
Â  Â  Â  switchDashTab('moje-ogloszenia');
Â  Â  Â  showToast("OgÅ‚oszenie zostaÅ‚o pomyÅ›lnie dodane!", "success");
Â  Â  Â  e.target.reset();
Â  Â  }
Â  </script>
</body>
</html>
